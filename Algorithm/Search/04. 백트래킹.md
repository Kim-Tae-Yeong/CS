# 백트래킹
## 백트래킹(Back Traking)
백트래킹은 재귀적으로 문제를 해결하되 현재 재귀를 통해 확인 중인 상태가 제한 조건에 위배가 되는지 판단하고, 해당 상태가 위배되는 경우 해당 상태를 제외하고 다음 단계로 넘어간다.

즉, 해를 찾는 도중 해가 절대 될 수 없다고 판단되면 되돌아가서 다시 해를 찾는 것이다.

여기서 더 이상 탐색할 필요가 없는 상태를 제외하는 것을 가지치기라고 한다.

백트래킹 특성상 조건에 부합하지 않으면 이전 수행으로 돌아가야 함으로 구현시 DFS를 주로 사용한다.

## 과정
[1, 2, 3, 4] 중 2개의 숫자를 뽑아서 합이 6이 초과하는 경우를 알아보자.

뽑는 순서가 다르면 다른 경우의 수로 간주한다.

먼저 아래 그림과 같이 경우를 나눈다.

<img width="940" alt="image" src="https://github.com/user-attachments/assets/443ed35e-a935-459f-94b7-1955fe5a4256" />

두 숫자 중 하나라도 3 미만이면 6을 초과할 수 없기 때문에 첫번째 숫자가 3 미만인 경우 백트래킹을 실시한다.

<img width="940" alt="image" src="https://github.com/user-attachments/assets/3d4b9dbc-e2e9-4143-9d9c-8731eb6d7a16" />

첫번째 숫자가 3과 4인 경우 탐색을 실시한다.

<img width="940" alt="image" src="https://github.com/user-attachments/assets/7d7e24c0-faa8-4c97-9715-57bcac4069bc" />

가능한 경우는 [3, 4], [4, 3]이 된다.

## 코드
백준 15649 N과 M (1) - 실버 3
- https://www.acmicpc.net/problem/15649

<img width="940" alt="image" src="https://github.com/user-attachments/assets/87fdd6d9-ca33-4c55-bc43-d2dd84361c43" />

```java
import java.util.*;

public class Main {
    static int N, M;
    static boolean[] visited;
    static int[] result;

    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);
        N = sc.nextInt();
        M = sc.nextInt();
        sc.close();
        
        visited = new boolean[N + 1];
        result = new int[M];
        
        backtrack(0);
    }

    static void backtrack(int depth) {
        if (depth == M) {
            for (int num : result) {
                System.out.print(num + " ");
            }
            System.out.println();
            return;
        }

        for (int i = 1; i <= N; i++) {
            if (!visited[i]) {
                visited[i] = true;
                result[depth] = i;
                backtrack(depth + 1);
                visited[i] = false;
            }
        }
    }
}
```

```
// Input
3 2

// Output
1 2
1 3
2 1
2 3
3 1
3 2
```



## 참고
- https://velog.io/@gayeong39/%EB%B0%B1%ED%8A%B8%EB%9E%98%ED%82%B9-%EC%95%8C%EA%B3%A0%EB%A6%AC%EC%A6%98-BackTracking
- https://jaehee1007.tistory.com/82
